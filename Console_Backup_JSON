async function backupNow() {
    const { getFirestore, collection, getDocs } = await import("https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js");
    const db = getFirestore();
    
    const backup = { 
        timestamp: new Date().toISOString(),
        speisekammer: [], 
        rezepte: [] 
    };

    // Daten sammeln
    const skSnap = await getDocs(collection(db, "speisekammer"));
    skSnap.forEach(doc => backup.speisekammer.push({ id: doc.id, ...doc.data() }));

    const rezSnap = await getDocs(collection(db, "rezepte"));
    rezSnap.forEach(doc => backup.rezepte.push({ id: doc.id, ...doc.data() }));

    // Datei-Download auslösen
    const blob = new Blob([JSON.stringify(backup, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `Wochenplaner_Backup_${new Date().toLocaleDateString()}.json`;
    a.click();
    
    console.log("✅ Backup erfolgreich heruntergeladen!");
}
backupNow();
